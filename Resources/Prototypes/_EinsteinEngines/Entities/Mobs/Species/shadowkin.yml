# SPDX-FileCopyrightText: 2025 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 2025 IrisTheAmped <iristheamped@gmail.com>
# SPDX-FileCopyrightText: 2025 John Willis <143434770+CerberusWolfie@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 Rouden <149893554+Roudenn@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 Roudenn <romabond091@gmail.com>
# SPDX-FileCopyrightText: 2025 Ted Lukin <66275205+pheenty@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 pheenty <fedorlukin2006@gmail.com>
# SPDX-FileCopyrightText: 2025 vorpuscl <198003781+vorpuscl@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 ThanosDeGraf <richardgirgindontstop@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  save: false
  parent:
  - BaseMobSpeciesOrganic
  id: MobShadowkinBase
  name: Urist McShadow
  abstract: true
  components:
  - type: LanguageKnowledge # Einstein Engines - Language
    speaks:
    - TauCetiBasic
    - Marish
    understands:
    - TauCetiBasic
    - Marish
  - type: Destructible
    thresholds:
      - trigger:
          !type:DamageTypeTrigger
          damageType: Blunt
          damage: 300
        behaviors:
          - !type:GibBehavior {}
          - !type:SpawnEntitiesBehavior
            spawn:
              ShadowkinShadow:
                min: 1
                max: 1
              EffectFlashShadowkinShadeskip:
                min: 1
                max: 1
      - trigger:
          !type:DamageTypeTrigger
          damageType: Heat
          damage: 1500
        behaviors:
          - !type:SpawnEntitiesBehavior
            spawnInContainer: true
            spawn:
              Ash:
                min: 1
                max: 1
          - !type:BurnBodyBehavior {}
          - !type:PlaySoundBehavior
            sound:
              collection: MeatLaserImpact
  - type: Blindable
  - type: Perishable
  - type: FireVisuals
    alternateState: Standing
  - type: Hunger
  - type: Thirst
  - type: Carriable
  - type: HumanoidAppearance
    species: Shadowkin
  - type: Icon
    sprite: _EinsteinEngines/Mobs/Species/Shadowkin/parts.rsi
    state: full
  - type: Body
    prototype: Shadowkin
  - type: Damageable
    damageContainer: Biological # Shadowkin
    damageModifierSet: Shadowkin
  - type: Bloodstream
    bloodReagents:
      reagents:
      - ReagentId: BlackBlood
        Quantity: 1
  - type: Fixtures
    fixtures:
      fix1:
        shape: !type:PhysShapeCircle
          radius: 0.35
        density: 130 #lower density
        restitution: 0.0
        mask:
          - MobMask
        layer:
          - MobLayer
  - type: Sprite
    netsync: false
    noRot: true
    drawdepth: Mobs
    # scale: 0.85, 0.85 # Goobstation: port EE height/width sliders
    layers:
      - map: ["enum.HumanoidVisualLayers.Groin"]
      - map: ["enum.HumanoidVisualLayers.Chest"]
      - map: ["enum.HumanoidVisualLayers.Head"]
      - map: ["enum.HumanoidVisualLayers.Snout"]
      - map: ["enum.HumanoidVisualLayers.Eyes"]
        shader: unshaded
      - map: ["enum.HumanoidVisualLayers.RArm"]
      - map: ["enum.HumanoidVisualLayers.LArm"]
      - map: ["enum.HumanoidVisualLayers.RLeg"]
      - map: ["enum.HumanoidVisualLayers.LLeg"]
      - shader: StencilClear
        sprite: Mobs/Species/Human/parts.rsi
        state: l_leg
      - shader: StencilMask
      - map: ["enum.HumanoidVisualLayers.StencilMask"]
        sprite: Mobs/Customization/masking_helpers.rsi
        state: full
        visible: false
      - map: ["enum.HumanoidVisualLayers.LFoot"]
      - map: ["enum.HumanoidVisualLayers.RFoot"]
      - map: ["socks"]
      - map: ["underpants"]
      - map: ["undershirt"]
      - map: ["jumpsuit"]
      - map: ["enum.HumanoidVisualLayers.LHand"]
      - map: ["enum.HumanoidVisualLayers.RHand"]
      - map: ["enum.HumanoidVisualLayers.Handcuffs"]
        color: "#ffffff"
        sprite: Objects/Misc/handcuffs.rsi
        state: body-overlay-2
        visible: false
      - map: ["id"]
      - map: ["gloves"]
      - map: ["shoes"]
      - map: ["ears"]
      - map: ["innerBelt"]
      - map: ["innerNeck"]
      - map: ["outerClothing"]
      - map: ["eyes"]
      - map: ["belt"]
      - map: ["neck"]
      - map: ["back"]
      - map: [ "enum.HumanoidVisualLayers.Face" ]
      - map: ["enum.HumanoidVisualLayers.FacialHair"]
      - map: ["enum.HumanoidVisualLayers.Hair"]
      - map: ["enum.HumanoidVisualLayers.HeadSide"]
      - map: ["enum.HumanoidVisualLayers.HeadTop"]
      - map: ["mask"]
      - map: ["head"]
      - map: ["pocket1"]
      - map: ["pocket2"]
      - map: ["enum.HumanoidVisualLayers.Tail"]
  - type: MeleeWeapon
    soundHit:
      collection: AlienClaw
    angle: 30
    animation: WeaponArcClaw
    damage:
      types:
        Slash: 5
  - type: Vocal
    sounds:
      Male: MaleShadowkin
      Female: FemaleShadowkin
      Unsexed: MaleShadowkin
  - type: TypingIndicator
    proto: alien
  - type: Speech
    allowedEmotes: ['Mars', 'Wurble']
  - type: CollectiveMind
    defaultChannel: Empathy
    channels:
    - Empathy
  - type: Tag
    tags:
    - CanPilot
    - FootstepSound
    - DoorBumpOpener
    - AnomalyHost
    - ShadowkinEmotes
  - type: Respirator #Goob edit start - Lore Accurate Shadowkin superdense iron blood.
    updateInterval: 6
    saturationLoss: 0.2
    maxSaturation: 30
    saturation: 30 #Goob Edit end

- type: entity
  save: false
  parent: MobHumanDummy
  id: MobShadowkinDummy
  categories: [ HideSpawnMenu ]
  description: A dummy shadowkin meant to be used in character setup.
  components:
    - type: HumanoidAppearance
      species: Shadowkin
    - type: Sprite
      netsync: false
      noRot: true
      drawdepth: Mobs
      # scale: 0.85, 0.85 # Small # Goobstation: port EE height/width sliders
      layers:
        - map: ["enum.HumanoidVisualLayers.Chest"]
        - map: ["enum.HumanoidVisualLayers.Groin"]
        - map: ["enum.HumanoidVisualLayers.Head"]
        - map: ["enum.HumanoidVisualLayers.Snout"]
        - map: ["enum.HumanoidVisualLayers.Eyes"]
          shader: unshaded
        - map: ["enum.HumanoidVisualLayers.RArm"]
        - map: ["enum.HumanoidVisualLayers.LArm"]
        - map: ["enum.HumanoidVisualLayers.RLeg"]
        - map: ["enum.HumanoidVisualLayers.LLeg"]
        - shader: StencilClear
          sprite: Mobs/Species/Human/parts.rsi
          state: l_leg
        - shader: StencilMask
          map: ["enum.HumanoidVisualLayers.StencilMask"]
          sprite: Mobs/Customization/masking_helpers.rsi
          state: full
          visible: false
        - map: ["enum.HumanoidVisualLayers.LFoot"]
        - map: ["enum.HumanoidVisualLayers.RFoot"]
        - map: ["socks"]
        - map: ["underpants"]
        - map: ["undershirt"]
        - map: ["jumpsuit"]
        - map: ["enum.HumanoidVisualLayers.LHand"]
        - map: ["enum.HumanoidVisualLayers.RHand"]
        - map: ["enum.HumanoidVisualLayers.Handcuffs"]
          color: "#ffffff"
          sprite: Objects/Misc/handcuffs.rsi
          state: body-overlay-2
          visible: false
        - map: ["id"]
        - map: ["gloves"]
        - map: ["shoes"]
        - map: ["ears"]
        - map: ["innerBelt"]
        - map: ["innerNeck"]
        - map: ["outerClothing"]
        - map: ["eyes"]
        - map: ["belt"]
        - map: ["neck"]
        - map: ["back"]
        - map: [ "enum.HumanoidVisualLayers.Face" ]
        - map: ["enum.HumanoidVisualLayers.FacialHair"]
        - map: ["enum.HumanoidVisualLayers.Hair"]
        - map: ["enum.HumanoidVisualLayers.HeadSide"]
        - map: ["enum.HumanoidVisualLayers.HeadTop"]
        - map: ["mask"]
        - map: ["head"]
        - map: ["pocket1"]
        - map: ["pocket2"]
        - map: ["enum.HumanoidVisualLayers.Tail"]
